<%- include('../_layouts/adminHeader') %>

<h2 class="page-title">Add a Product</h2>

<a href="/admin/products" class="btn btn-primary">Back to all products</a>

<br><br>

<form action="/admin/products/add-product" method="post" enctype="multipart/form-data">

  <div class="form-group">
    <label for="title">Title</label>
    <input id="title" class="form-control" type="text" name="title" value="<%= title %>" placeholder="Title">
  </div>

  <div class="form-group">
    <label for="category">Category</label>
    <select class="form-control" name="category" id="category">
      <% categories.forEach((category) => { %>
        <option value="<%= category.slug %>"><%= category.title %></option>
      <% }) %>
    </select>
  </div>

  <div class="form-group">
    <label for="description">Description</label>
    <textarea id="description" class="form-control" name="description" placeholder="Description"><%= description %></textarea>
  </div>

  <div class="form-group">
    <label for="price">Price</label>
    <input id="price" class="form-control" type="text" name="price" value="<%= price %>" placeholder="Price">
  </div>

  <div class="form-group">
    <label for="image">Image</label>
    <input id="image" type="file" name="image">
    <img src="#" id="imgPreview" alt="">
  </div>

  <button class="btn btn-default">Submit</button>

</form>

<script>
  function readURL(input) {
      if (input.files && input.files[0]) {
          var reader = new FileReader();
          var imgPreview = document.getElementById('imgPreview')

          reader.onload = function (e) {
              imgPreview.setAttribute('src', e.target.result);
              imgPreview.height = '100';
              imgPreview.widht = '100';
          }

          reader.readAsDataURL(input.files[0]);
      }
  }

  var image = document.getElementById('image');

  image.addEventListener("change", function () {
      readURL(this);
  });

</script>

<%- include('../_layouts/AdminFooter') %>